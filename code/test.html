<!DOCTYPE html>
<html>
<head>
	<title>Issue Workflow Explorer</title>
	<link href="static/js/lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<script src="static/js/lib/jquery-2.2.3.min.js"></script>
	<script src="static/js/lib/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="static/js/lib/Highstock-4.2.5/js/highstock.js"></script>
	<script type="text/javascript" src="static/js/lib/Highstock-4.2.5/js/highcharts-more.js"></script>
</head>
<body>
<div style="width:500px;margin:200px auto">
<div id="fix-time-wrap" style="width:330px"></div><button id="add">draw</button>
</div>
<script>
var chartHeight = (parseInt($('#fix-time-wrap').css("width")) * 0.7) + "px";
$('#fix-time-wrap').css("height",chartHeight);
var data = [[0,0],[809,0.1],[909,0.2],[1009,0.3],[1909,0.4],[10009,0.5],[11009,0.6],[12009,0.7],[13009,0.8],[14009,0.9],[14909,1]]

function addResolveSeries(newData,chart){
	//add another line to the chart
	var curMaxTime = 0;
	var seriesLen = chart.options.series.length;
	for(var i = 0; i < seriesLen; i++){
		var arrLen = chart.options.series[i].data.length;
		curMaxTime = Math.max(curMaxTime,chart.options.series[i].data[arrLen-1][0]);
	}
	var maxTime = Math.max(newData[newData.length-1][0],curMaxTime);
	if (maxTime > curMaxTime){
		for(var i = 0; i < seriesLen; i++){
			oldSeries = chart.options.series[i].data;
			oldSeries.push([maxTime,oldSeries[oldSeries.length-1][1]]);
			chart.series[i].setData(oldSeries,false);
		}		
	}
	else{
		newData.push([maxTime,newData[newData.length-1][1]]);
	}
	chart.addSeries({data:newData});
	chart.redraw();
}
$("#add").click(function(){
	var chart = $("#fix-time-wrap").highcharts();
	addResolveSeries(data,chart);
});
</script>
</body>
</html>
